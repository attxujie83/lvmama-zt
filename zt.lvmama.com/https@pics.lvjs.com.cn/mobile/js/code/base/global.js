var locHref=window.location.href,locHost=window.location.host,$sessionStorage=window.sessionStorage,$localStorage=window.localStorage,index_php,baiduApiKey="4tjhI1dx8WPmCIKtl365x7Xg",siteFlag=0,configUrl={hostUrl:"//"+locHost+"/",php:"//"+locHost+"/",jsp:"//"+locHost+"/"},bd_info,bd_sign,app_id,bd_framework,global={updown:!0,linkFn:"click",contextPath:"clutter",picUrl:"//pics.lvjs.com.cn/img/mobile/touch/",nearestVer:"LVMM/6.",nearestVerPad:"3.0.0",nearestVerWP:"2.0.0",CONTENT_LOGDING:"loading",message:null,mOrqing:"default",isLogin:function(){var a=this;$.ajax({type:"post",url:"/clutter/getuseInfo.htm",dataType:"json",async:!1,success:function(b){if(b.userName){var c=b,d=[],e=a.getServerTime();if(c){if(c.nickName)var f=c.nickName;else var f="";d.push({nickName:f,userName:c.userName,time:e})}$localStorage.setItem("loginMsg",JSON.stringify(d))}}})},Login:function(a,b){var c=this,d=c._fetchQueue(a),e=c.isClient(),f=b?b:window.location.href,g=navigator.userAgent;if(e.indexOf("1")>-1||e.indexOf("2")>-1)(g.indexOf("CPU iPhone OS")>-1||g.indexOf("iPad;CPU OS")>-1)&&g.indexOf("LVMM/")>-1?window.location.href=configUrl.hostUrl+"login.htm?service="+encodeURIComponent(f):window.location.href='LvmmLogin://[{"login_third":"true","onsuccess":"success","onfail":"fail"}]';else if(e.indexOf("4")>-1){var h="//"+c.host+"Login?"+d;window.location.href=h}else window.location.href=configUrl.hostUrl+"login.htm?service="+encodeURIComponent(f)},_fetchQueue:function(a){var b,c=[];for(var d in a)switch(typeof a[d]){case"string":a[d]=a[d];break;case"function":a[d]=a[d].getName()}return c.push(a),b=JSON.stringify(c)},localStorageIsLogin:function(){var a=this;if(void 0!=$localStorage.loginMsg&&null!=$localStorage.loginMsg&&""!=$localStorage.loginMsg){var b=JSON.parse($localStorage.getItem("loginMsg")),c=b[0].time,d=a.getServerTime(),e=a.diffDate(d,c);e>30&&($localStorage.removeItem("loginMsg"),a.isLogin())}else a.isLogin()},diffDate:function(a,b){var c,d,e=0;return c=""==a?new Date:a,d=""==b?new Date:b,e=Date.parse(c)-Date.parse(d),e/=6e4,e.toFixed(0)},isWap:function(){var a=this;return 3==a.isCliet()?!0:!1},getCityAddress:function(){var a="上海",b=this,c=b.getCookie("CITY_IP_SITE"),d=b.getCookie("SELECT_CITY");return a=d?d:c},getSiteAddress:function(){var a="上海",b=this,c=b.getCookie("IP_SITE"),d=b.getCookie("SELECT_SITE");return d?d==c?a=d:(a=d,$sessionStorage.chooseSite||b.createDialog("定位你在"+c+"，是否切换到"+c+"站？",2,function(){$sessionStorage.setItem("chooseSite","true"),b.revmoePop(),window.location.href="index.php?s=/Sitemap/selectstation&name="+c+"&loc="+encodeURIComponent(locHref.split("&name")[0])},function(){$sessionStorage.setItem("chooseSite","true")})):($sessionStorage.setItem("chooseSite","true"),a=c),a},createDialog:function(a,b,c,d){var e=this,f=$("html").height()+45,g=$("html").width(),h="";h+='<div class="modal" style="width:'+g+"px;height:"+f+'px;z-index:19;display:block;"></div>',h+='<div class="popup_wrap" style="top: 170px; display: block;z-index:20;">',h+='<section class="popup find_popup">',2==b||1==b?h+="<header>提示信息</header>":3==b&&(h+="<header>免登陆下单</header>"),h+="<article>",h+="<p>"+a+"</p>",h+="</article>",h+="<footer>",2==b?h+='<a href="javascript:;" class="ic_yellow">取消</a><a href="javascript:;" class="ic_roseo">确定</a>':1==b?h+='<a href="javascript:;" class="ic_roseo">确定</a>':3==b&&(h+='<a href="javascript:;" class="ic_loading">正在加载中...</a>'),h+="</footer>",h+="</section>",h+="</div>",$("body").append(h),2==b?$(".popup_wrap .ic_yellow").mClick(function(){d&&d(),e.revmoePop()}):1==b&&$(".popup_wrap .ic_roseo").mClick(function(){e.revmoePop()}),$(".popup_wrap .ic_roseo").mClick(function(){c&&c()})},revmoePop:function(){var a=this;$(".popup_wrap .ic_roseo").unbind(a.linkFn),$(".modal").remove(),$(".popup_wrap").remove()},isSessionLocation:function(){return $sessionStorage.locationSite?!0:!1},cityOrSite:function(a){var b,c=this,d=c.getUrlParam("site");return 1==d?b=a.city:2==d&&(b=a.station_name),b},getUrlParam:function(a){var b=new RegExp("(^|&)"+a+"=([^&]*)(&|$)"),c=window.location.search.substr(1).match(b);return null!=c?unescape(c[2]):null},delCookie:function(a){document.cookie=a+"=;expires="+new Date(0).toGMTString()},getCookie:function(a){for(var b=document.cookie.split(";"),c=0;c<b.length;c++){var d=b[c].split("=");if(d[0].trim()==a)return decodeURIComponent(d[1])}},setCookie:function(a,b){var c=30,d=new Date;d.setTime(d.getTime()+24*c*60*60*1e3),document.cookie=a+"="+escape(b)+";expires="+d.toGMTString()},setRootCookie:function(a,b,c,d){var e=c,f=d;e=e?";domain="+e:"",f=f?";path="+f:"";var g=30,h=new Date;h.setTime(h.getTime()+24*g*60*60*1e3),document.cookie=a+"="+escape(b)+e+f+";expires="+h.toGMTString()},getServerTime:function(){var a=!1,b=location.href.indexOf("?")>-1?"&getServerTime":"?getServerTime";try{a=new ActiveXObject("Msxml2.XMLHTTP")}catch(c){try{a=new ActiveXObject("Microsoft.XMLHTTP")}catch(d){a=!1}}return a||"undefined"==typeof XMLHttpRequest||(a=new XMLHttpRequest),a.open("GET",location.href+b,!1),a.onreadystatechange=function(){return 4!=a.readyState||200!=a.status?!1:void 0},a.setRequestHeader("Range","bytes=-1"),a.send(null),severtime=new Date(a.getResponseHeader("Date")),severtime},lvToast:function(a,b,c){var d=this;if(c=c?c:3e3,0!=$("#lv-temp-toast").length)return!1;$("body").append("<div id='lv-temp-toast' class='lv-toast' style='display:none;'><div class='lv-toast-div'></div><p></p></div>");var e=($(window).width()-200)/2,f=$(window).scrollTop()+200,g=$("#lv-temp-toast");g.css({left:e,top:f,opacity:"0.7"}),g.children("p").html(b),a==d.CONTENT_LOGDING?(g.addClass("lv-toast-loading").css({top:f}).empty().append('<img style="width:32px;" src="'+d.picUrl+"/img/3.gif />").fadeIn(600),setTimeout(function(){g.addClass("lv-toast").addClass("lv-toast-loading").css({top:f}).fadeOut(1e3,function(){$(this).remove()})},c)):a?(g.children("div").append('<img src="'+d.picUrl+'img/smile-grey.png" />'),g.addClass("lv-toast").addClass("lv-toast-success").fadeIn(600),setTimeout(function(){g.fadeOut(1e3,function(){$(this).remove()})},c)):(g.children("div").append('<img src="'+d.picUrl+'img/sad-big.png" />'),g.addClass("lv-toast").addClass("lv-toast-fail").fadeIn(600),setTimeout(function(){g.fadeOut(1e3,function(){$(this).remove()})},c))},baidu_order_ticket:function(a,b,c,d,e,f){var g=this,h=this.getCookie("bd_framework")||this.getUrlParam("bd_framework")||$localStorage.getItem("bd_framework"),i="",j=window.location.host,k="//"+j+a+"/bdorder/baidu_order_fill.htm?productId="+b+"&branchId="+c+"&canOrderToday="+d+"&qingPlaceUrl="+f;1==h?i=k:20==e?(g.setCookie("lijian_status","no"),i=f):i=21==e?k:1==e?f:k,window.location.href="//xbox.m.baidu.com/app/moplus/pay_skip?appid=2430580&url="+encodeURIComponent(i)},createShadowBody:function(){var a=$("body").height(),b=$("html").width(),c="";c+='<div class="modal" style="width:'+b+"px;height:"+a+'px;z-index:19;display:block;"></div>';var d=this.getCookie("bd_framework")||this.getUrlParam("bd_framework")||$localStorage.getItem("bd_framework");1!=d&&(c+='<div class="popup_wrap" style="display: block;z-index:20;text-align:center;top:45%;color:#fff;"><p style="padding:10px;background:#000;opacity:0.7;border-radius:5px;display:inline;">订单正在提交中，请稍后...</p></div>'),$("body").append(c)},isCliet:function(){var a=navigator.userAgent,b=global.getUrlParam("wpversion"),c=global.getUrlParam("wpagent");return-1!=a.indexOf("LVMM")||-1!=a.indexOf("ANDROID_")||-1!=a.indexOf("innerBrower")?-1!=a.indexOf("LVMM")||-1!=a.indexOf("ANDROID_")?-1!=a.indexOf("LVMMPAD/2.1.0")||-1!=a.indexOf("LVMMPAD/2.0.0")?5:-1!=a.indexOf("5.2.0")||-1!=a.indexOf("5.2.1")||-1!=a.indexOf("5.3.0")||-1!=a.indexOf("5.3.1")||-1!=a.indexOf("LVMMPAD/2.2.0")||-1!=a.indexOf("LVMMPAD/2.3.0")||-1!=a.indexOf("6.0.0")?1:-1==a.indexOf("5.0.0")?0:2:2:-1!=a.indexOf("Windows")&&-1!=a.indexOf("Phone")&&"LVMM"==c?"1.2.0"==b?4:6:3},isClient:function(){var a=this,b=navigator.userAgent,c=(window.location.href,global.getUrlParam("wpversion")),d=global.getUrlParam("wpagent");return-1!=b.indexOf("MicroMessenger")?"3":b.indexOf("LVMM")>0?b.indexOf("LVMMPAD")>0?b.indexOf(a.nearestVerPad)>0?"02":"2":b.indexOf(a.nearestVer)>0?"01":"1":b.indexOf("Windows Phone")>0&&"LVMM"==d?c==a.nearestVerWP?"04":"4":b.indexOf("Windows Phone")>0&&b.indexOf("WebView")>0?5:"0"},isVst:function(){var a=this.isClient();return 3==parseInt(a)||a.toString().indexOf("0")>-1?!0:!1}};"m.lvmama.com"==window.location.host||"m1.lvmama.com"==window.location.host?global.mOrqing="m":"qing.lvmama.com"==window.location.host?global.mOrqing="qing":"yd.lvmama.com"==window.location.host?global.mOrqing="yd":"mj.lvmama.com"==window.location.host?global.mOrqing="mj":"zt1.lvmama.com"==window.location.host?global.mOrqing="zt1":global.mOrqing="other",Function.prototype.getName=function(){return this.name||this.toString().match(/function\s*([^(]*)\(/)[1]},String.prototype.Trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"")},String.prototype.isMobile=function(){var a=this;return a.match(/^1[3|4|5|7|8][0-9]\d{4,8}$/)&&11==a.length&&""!=a?!0:!1},String.prototype.isEmail=function(){var a=this;return a.match(/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/)&&""!=a?!0:!1},String.prototype.isWords=function(){var a=this;return a.match(/[A-Za-z0-9]+$/)[0]!=a||""==a?!1:!0},$.fn.mClick=function(a,b){var c={callback:void 0};$.extend(c,b),$(this).each(function(b){new MBP.fastButton($(this).get(0),a)})},Array.prototype.unique=function(a){for(var b=[this[0]],c=1;c<this.length;c++){for(var d=!1,e=0;e<b.length;e++)if(this[c][a]==b[e][a]){d=!0;break}d||b.push(this[c])}return b},1==global.getUrlParam("bd_framework")&&$localStorage.setItem("bd_framework",1),bd_framework=global.getCookie("bd_framework")||global.getUrlParam("bd_framework")||$localStorage.getItem("bd_framework");var loginStatus=!1;-1!=locHref.indexOf("qing.lvmama")&&clouda.lightapp(baiduApiKey,function(){loginStatus=!0}),$(function(){"zt1"!=global.mOrqing&&$.ajax({type:"post",url:"/clutter/html5/baidu_expand.htm",success:function(a){$("#baiduExpand").attr("src",a.hmtPixel)},error:function(){}})}),function(a){window.MBP=window.MBP||{},MBP.fastButton=function(b,c){this.element=b,this.handler=c,b.addEventListener&&(a.hasOwnProperty("ontouchstart")?b.addEventListener("touchstart",this,!1):b.addEventListener("click",this,!1))},MBP.fastButton.prototype.handleEvent=function(a){switch(a.type){case"touchstart":this.onTouchStart(a);break;case"touchmove":this.onTouchMove(a);break;case"touchend":this.onClick(a);break;case"click":this.onClick(a)}},MBP.fastButton.prototype.onTouchStart=function(b){b.stopPropagation(),this.element.addEventListener("touchend",this,!1),a.body.addEventListener("touchmove",this,!1),this.startX=b.touches[0].clientX,this.startY=b.touches[0].clientY},MBP.fastButton.prototype.onTouchMove=function(a){(Math.abs(a.touches[0].clientX-this.startX)>10||Math.abs(a.touches[0].clientY-this.startY)>10)&&this.reset()},MBP.fastButton.prototype.onClick=function(a){a.stopPropagation(),this.reset(),this.handler(a),"touchend"==a.type&&MBP.preventGhostClick(this.startX,this.startY)},MBP.fastButton.prototype.reset=function(){this.element.removeEventListener("touchend",this,!1),a.body.removeEventListener("touchmove",this,!1)},MBP.preventGhostClick=function(a,b){MBP.coords.push(a,b),window.setTimeout(function(){MBP.coords.splice(0,2)},2500)},MBP.ghostClickHandler=function(a){for(var b=0,c=MBP.coords.length;c>b;b+=2){var d=MBP.coords[b],e=MBP.coords[b+1];Math.abs(a.clientX-d)<25&&Math.abs(a.clientY-e)<25&&(a.stopPropagation(),a.preventDefault())}},a.addEventListener&&a.addEventListener("click",MBP.ghostClickHandler,!0),MBP.coords=[]}(document);